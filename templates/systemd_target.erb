[Unit]
After=syslog.target network.target
Wants=<%= @service_name %>-flush.service <% for w in @workers do %><%= @service_name %>-<%= w %>.service <% end %>
# Force this target to block upon "stop", until all workers have gracefully exited.
# This makes it easier to write deploy scripts that rely on php-resque being stopped.
Before=<%= @service_name %>-flush.service <% for w in @workers do %><%= @service_name %>-<%= w %>.service <% end %>

[Install]
WantedBy=multi-user.target
Also=<% for w in @workers do %><%= @service_name %>-<%= w %>.service <% end %>
